# Update Candidate Goal & Stack

API để cập nhật mục tiêu nghề nghiệp và ngăn xếp công nghệ của candidate.

## Endpoint
`PATCH /api/profile/goal`

## Authentication
Required (JWT Token) - Candidate

## Request Body (JSON)
```json
{
  "target_level": "Senior",
  "primary_stack": "Backend",
  "secondary_stacks": ["DevOps", "AI/ML"]
}
```

## Validation Rules
- `target_level`: optional, string (Fresher, Junior, Middle, Senior, Tech Lead)
- `primary_stack`: optional, string (Backend, Frontend, Fullstack, DevOps, AI/ML, Mobile)
- `secondary_stacks`: optional, array of strings

## Response Success (200 OK)
```json
{
  "success": true,
  "data": {
    "target_level": "Senior",
    "primary_stack": "Backend",
    "secondary_stacks": ["DevOps", "AI/ML"]
  },
  "message": "Career goals updated successfully."
}
```

## Business Rules
1. **Editable fields only**: Chỉ được sửa target_level, primary_stack, secondary_stacks
2. **No score modification**: Không thể sửa avg_score, strengths, weaknesses
3. **Auto-create profile**: Nếu chưa có profile → tự động tạo mới
4. **Partial update**: Chỉ update các field được gửi trong request

## Editable vs Read-only

### ✅ Editable (Candidate control)
- `target_level` - Mục tiêu cấp độ
- `primary_stack` - Stack chính
- `secondary_stacks` - Các stack phụ

### ❌ Read-only (System control)
- `current_level` - Từ interview
- `avg_score` - Tính từ interviews
- `strengths` - Từ AI evaluation
- `weaknesses` - Từ AI evaluation
- `interview_count` - Auto-increment
- `last_interview_at` - Auto-update

## Use Cases

### Set initial goals (New candidate)
```json
{
  "target_level": "Junior",
  "primary_stack": "Backend"
}
```

### Update career direction
```json
{
  "target_level": "Senior",
  "primary_stack": "Fullstack",
  "secondary_stacks": ["DevOps"]
}
```

### Change only target level
```json
{
  "target_level": "Middle"
}
```

## Error Cases
- **400 Bad Request**: Validation failed
- **401 Unauthorized**: Missing hoặc invalid token

## cURL Example
```bash
curl -X PATCH http://localhost:8000/api/profile/goal \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "target_level": "Senior",
    "primary_stack": "Backend",
    "secondary_stacks": ["DevOps", "AI/ML"]
  }'
```

## Notes
- Nếu profile chưa tồn tại → tự động tạo mới
- Partial update: Chỉ update fields được gửi
- Không ảnh hưởng đến derived fields (avg_score, strengths, etc.)
- Recommend: Set goals trước khi bắt đầu interview đầu tiên
