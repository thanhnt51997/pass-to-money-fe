# Aggregate Interview Score

API nội bộ để tổng hợp điểm số từ tất cả các câu hỏi trong một phiên phỏng vấn.

## Mô tả
Sau khi tất cả các câu trả lời đã được đánh giá, hệ thống sẽ tổng hợp điểm số và đưa ra recommendation (hire/consider/reject).

## Luồng xử lý

### 1. Trigger
- Được gọi bởi `RunAiEvaluationJob` khi interview session có status = `completed`
- Hoặc được gọi thủ công qua API (nếu cần)

### 2. Input
- Array of `QuestionEvaluation` objects

### 3. Process
1. Tính average score từ tất cả các câu hỏi
2. Xác định recommendation dựa trên average score:
   - `score >= 8`: **HIRE**
   - `score >= 5`: **CONSIDER**
   - `score < 5`: **REJECT**
3. Tạo summary text
4. Lưu kết quả vào `interviews` table

### 4. Output
```json
{
  "total_score": 7.5,
  "recommendation": "CONSIDER",
  "summary": "Average technical score: 7.5/10.",
  "score_detail": [
    {
      "question_id": 1,
      "score": 8,
      "strengths": ["..."],
      "weaknesses": ["..."],
      "comment": "..."
    },
    {
      "question_id": 2,
      "score": 7,
      "strengths": ["..."],
      "weaknesses": ["..."],
      "comment": "..."
    }
  ]
}
```

## Business Rules
- Nếu không có câu trả lời nào → score = 0, recommendation = REJECT
- Score được làm tròn đến 2 chữ số thập phân
- Recommendation phải là một trong: HIRE, CONSIDER, REJECT
- Kết quả được lưu vào các fields:
  - `score_total`
  - `score_detail` (JSON)
  - `ai_summary`
  - `recommendation`
  - `evaluated_at`

## Files liên quan
- `App\Domain\Evaluation\Services\EvaluationService::aggregateResult()`
- `App\Infrastructure\Evaluation\Jobs\RunAiEvaluationJob`
- `App\Domain\Evaluation\Enums\Recommendation`
