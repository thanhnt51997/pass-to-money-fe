# Change Template Status (Publish/Archive)

API để thay đổi trạng thái của Interview Template (publish để active hoặc archive).

## Endpoint
`POST /api/admin/templates/{id}/status`

## Authentication
Required (JWT Token) - Admin only

## Request Body (JSON)
```json
{
  "status": "active"
}
```

## Validation Rules
- `status`: required, string, must be one of: `active`, `archived`

## Response Success (200 OK)
```json
{
  "success": true,
  "data": {
    "id": "9d2e5c8a-1234-5678-9abc-def012345678",
    "status": "active"
  },
  "message": "Template status changed successfully."
}
```

## Business Rules

### Khi Publish (status = `active`)
- **Chỉ có 1 template active** cho mỗi cặp `stack + level`
- Nếu đã có template active khác cho cùng stack+level → template cũ sẽ tự động archived
- Template mới sẽ được set status = `active`

### Khi Archive (status = `archived`)
- Template sẽ được set status = `archived`
- **Template archived là immutable** (không thể edit)
- Không ảnh hưởng đến các interview sessions đã tạo từ template này

## State Transition Rules
```
draft → active   ✅ Allowed
draft → archived ✅ Allowed
active → archived ✅ Allowed
archived → active ❌ Not allowed (create new version instead)
archived → draft  ❌ Not allowed
```

## Error Cases
- **400 Bad Request**: 
  - Invalid status value
  - Trying to activate archived template
- **401 Unauthorized**: Missing hoặc invalid token
- **403 Forbidden**: User không phải Admin
- **404 Not Found**: Template không tồn tại

## cURL Examples

### Publish Template
```bash
curl -X POST http://localhost:8000/api/admin/templates/9d2e5c8a-1234-5678-9abc-def012345678/status \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"status": "active"}'
```

### Archive Template
```bash
curl -X POST http://localhost:8000/api/admin/templates/9d2e5c8a-1234-5678-9abc-def012345678/status \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"status": "archived"}'
```

## Notes
- Khi publish template mới, hệ thống tự động archive template active cũ (nếu có)
- Template archived không thể revert về active (phải tạo version mới)
- Recommend: Test kỹ template ở status `draft` trước khi publish
